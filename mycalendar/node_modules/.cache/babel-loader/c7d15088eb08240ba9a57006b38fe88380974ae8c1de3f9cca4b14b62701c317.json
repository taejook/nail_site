{"ast":null,"code":"import _objectSpread from\"C:/Users/dah03/nail-site/mycalendar/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";const API_BASE=process.env.NODE_ENV===\"production\"?\"https://api.lucynailedit.twilightparadox.com/api\":\"http://localhost:3001/api\";// Token management\nlet token=null;export function setToken(newToken){token=newToken;if(newToken)localStorage.setItem(\"token\",newToken);else localStorage.removeItem(\"token\");}function getToken(){if(!token)token=localStorage.getItem(\"token\");return token;}async function fetchData(endpoint){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};try{const headers=_objectSpread(_objectSpread({\"Content-Type\":\"application/json\"},getToken()&&{Authorization:\"Bearer \".concat(getToken())}),options.headers||{});const res=await fetch(\"\".concat(API_BASE,\"/\").concat(endpoint),_objectSpread(_objectSpread({},options),{},{headers}));if(!res.ok){const errText=await res.text();throw new Error(\"\".concat(res.status,\" \").concat(res.statusText,\": \").concat(errText));}return await res.json();}catch(err){console.error(\"API Error:\",err);return null;}}export async function registerUser(_ref){let{fullName,email,password}=_ref;return fetchData(\"auth/register\",{method:\"POST\",body:JSON.stringify({fullName,email,password})});}export async function loginUser(_ref2){let{email,password}=_ref2;const data=await fetchData(\"auth/login\",{method:\"POST\",body:JSON.stringify({email,password})});if(data!==null&&data!==void 0&&data.token)setToken(data.token);return data;}export function logoutUser(){setToken(null);}export async function getMe(){return fetchData(\"auth/me\",{method:\"GET\"});}// Locations / Team / Services\nexport async function getLocations(){const data=await fetchData(\"locations\");return Array.isArray(data)?data:[];}export async function getTeamMembers(){const data=await fetchData(\"team-members\");return(data===null||data===void 0?void 0:data.team_members)||[];}export async function getServices(){const data=await fetchData(\"services\");return Array.isArray(data)?data:[];}// Bookings\nexport async function getBookings(){const data=await fetchData(\"bookings\");return Array.isArray(data)?data:[];}export async function createBooking(payload){return fetchData(\"bookings\",{method:\"POST\",body:JSON.stringify(payload)});}export async function cancelBooking(bookingId){return fetchData(\"bookings/\".concat(bookingId),{method:\"DELETE\"});}","map":{"version":3,"names":["API_BASE","process","env","NODE_ENV","token","setToken","newToken","localStorage","setItem","removeItem","getToken","getItem","fetchData","endpoint","options","arguments","length","undefined","headers","_objectSpread","Authorization","concat","res","fetch","ok","errText","text","Error","status","statusText","json","err","console","error","registerUser","_ref","fullName","email","password","method","body","JSON","stringify","loginUser","_ref2","data","logoutUser","getMe","getLocations","Array","isArray","getTeamMembers","team_members","getServices","getBookings","createBooking","payload","cancelBooking","bookingId"],"sources":["C:/Users/dah03/nail-site/mycalendar/src/utils/api.js"],"sourcesContent":["const API_BASE =\r\n  process.env.NODE_ENV === \"production\"\r\n    ? \"https://api.lucynailedit.twilightparadox.com/api\" \r\n    : \"http://localhost:3001/api\";\r\n\r\n// Token management\r\n\r\n\r\nlet token = null;\r\n\r\nexport function setToken(newToken) {\r\n  token = newToken;\r\n  if (newToken) localStorage.setItem(\"token\", newToken);\r\n  else localStorage.removeItem(\"token\");\r\n}\r\n\r\nfunction getToken() {\r\n  if (!token) token = localStorage.getItem(\"token\");\r\n  return token;\r\n}\r\n\r\nasync function fetchData(endpoint, options = {}) {\r\n  try {\r\n    const headers = {\r\n      \"Content-Type\": \"application/json\",\r\n      ...(getToken() && { Authorization: `Bearer ${getToken()}` }),\r\n      ...(options.headers || {}),\r\n    };\r\n\r\n    const res = await fetch(`${API_BASE}/${endpoint}`, {\r\n      ...options,\r\n      headers,\r\n    });\r\n\r\n    if (!res.ok) {\r\n      const errText = await res.text();\r\n      throw new Error(`${res.status} ${res.statusText}: ${errText}`);\r\n    }\r\n\r\n    return await res.json();\r\n  } catch (err) {\r\n    console.error(\"API Error:\", err);\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function registerUser({ fullName, email, password }) {\r\n  return fetchData(\"auth/register\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify({ fullName, email, password }),\r\n  });\r\n}\r\n\r\nexport async function loginUser({ email, password }) {\r\n  const data = await fetchData(\"auth/login\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify({ email, password }),\r\n  });\r\n  if (data?.token) setToken(data.token);\r\n  return data;\r\n}\r\n\r\nexport function logoutUser() {\r\n  setToken(null);\r\n}\r\n\r\n\r\nexport async function getMe() {\r\n  return fetchData(\"auth/me\", { method: \"GET\" });\r\n}\r\n\r\n\r\n// Locations / Team / Services\r\n\r\nexport async function getLocations() {\r\n  const data = await fetchData(\"locations\");\r\n  return Array.isArray(data) ? data : [];\r\n}\r\n\r\nexport async function getTeamMembers() {\r\n  const data = await fetchData(\"team-members\");\r\n  return data?.team_members || [];\r\n}\r\n\r\nexport async function getServices() {\r\n  const data = await fetchData(\"services\");\r\n  return Array.isArray(data) ? data : [];\r\n}\r\n\r\n\r\n// Bookings\r\n\r\nexport async function getBookings() {\r\n  const data = await fetchData(\"bookings\");\r\n  return Array.isArray(data) ? data : [];\r\n}\r\n\r\nexport async function createBooking(payload) {\r\n  return fetchData(\"bookings\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify(payload),\r\n  });\r\n}\r\n\r\nexport async function cancelBooking(bookingId) {\r\n  return fetchData(`bookings/${bookingId}`, { method: \"DELETE\" });\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}